{% extends 'base.html' %}
{% load static %}
{% load tailwind_tags %}
{% tailwind_css %}

{% block title %}Sign In - AniShows{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'users/css/login_page.css' %}">
{% endblock %}

{% block content %}
    {% include 'core/header.html' %}
    <div class="min-h-screen flex items-center justify-center px-4 py-12">
        <div class="w-full max-w-md">
            <!-- Login Card -->
            <div class="auth-card rounded-2xl p-8 shadow-lg"">
                <div class="mb-6">
                    <h1 class="text-2xl font-bold" style="color: var(--text-primary);">Welcome back</h1>
                    <p class="mt-2 text-sm" style="color: var(--text-secondary);">
                        Sign in to continue your anime journey
                    </p>
                </div>

                <!-- Social Login -->
                <div class="space-y-3 mb-6">
                    <button class="social-btn w-full py-3 rounded-lg font-medium flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"></path>
                        </svg>
                        <span>Continue with Google</span>
                    </button>
                    <button class="social-btn w-full py-3 rounded-lg font-medium flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.477 2 2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.989C18.343 21.129 22 16.99 22 12c0-5.523-4.477-10-10-10z"></path>
                        </svg>
                        <span>Continue with Facebook</span>
                    </button>
                </div>

                <div class="divider my-6">or continue with email</div>

                <!-- Login Form -->
                <form method="post">
                    {% csrf_token %}

                    <!-- Email Field -->
                    <div class="mb-4">
                        <label for="email" class="form-label block text-sm mb-2">Email address</label>
                        <input
                                type="email"
                                id="email"
                                name="email"
                                class="form-input w-full px-4 py-3 rounded-lg"
                                placeholder="you@example.com"
                                required
                        >
                        {% if form.email.errors %}
                            <p class="error-message">{{ form.email.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Password Field -->
                    <div class="mb-4">
                        <label for="password" class="form-label block text-sm mb-2">Password</label>
                        <input
                                type="password"
                                id="password"
                                name="password"
                                class="form-input w-full px-4 py-3 rounded-lg"
                                placeholder="••••••••"
                                required
                        >
                        {% if form.password.errors %}
                            <p class="error-message">{{ form.password.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Remember Me & Forgot Password -->
                    <div class="flex items-center justify-between mb-6">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" name="remember" class="w-4 h-4 rounded"
                                   style="accent-color: var(--accent);">
                            <span class="ml-2 text-sm" style="color: var(--text-secondary);">Remember me</span>
                        </label>
                        <a href="{% url 'password_reset' %}" class="link-accent text-sm font-medium">
                            Forgot password?
                        </a>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn-primary w-full py-3 rounded-lg font-semibold">
                        Sign in
                    </button>
                </form>

                <!-- Sign Up Link -->
                <p class="mt-6 text-center text-sm" style="color: var(--text-secondary);">
                    Don't have an account?
                    <a href="{% url 'register' %}" class="link-accent font-semibold">Sign up</a>
                </p>
            </div>

            <!-- Footer -->
            <p class="mt-8 text-center text-sm" style="color: var(--text-secondary);">
                By continuing, you agree to our
                <a href="#" class="link-accent">Terms</a> and
                <a href="#" class="link-accent">Privacy Policy</a>
            </p>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }

        const saved = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', saved);
    </script>
{% endblock %}